(()=>{"use strict";var e="textarea",t="keyboard__key",u="keyboard__key_active";const a=function(e,t){return e.value.substring(0,e.selectionStart)+t+e.value.substring(e.selectionEnd,e.value.length)},s=function(e){return e.value.substring(0,e.selectionStart-1)+e.value.substring(e.selectionEnd,e.value.length)},n=function(e){return e.value.substring(0,e.selectionStart)+e.value.substring(e.selectionEnd+1,e.value.length)};function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var u=0,a=new Array(t);u<t;u++)a[u]=e[u];return a}const i=function(e,t,u,a){var s,n=document.querySelector(".".concat(e)),i=n.selectionStart;n.value=t.apply(void 0,function(e){if(Array.isArray(e))return l(e)}(s=u)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var u=Object.prototype.toString.call(e).slice(8,-1);return"Object"===u&&e.constructor&&(u=e.constructor.name),"Map"===u||"Set"===u?Array.from(e):"Arguments"===u||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?l(e,t):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n.focus(),n.setSelectionRange(i+a,i+a)},r=function(e,t){Array.from(document.querySelectorAll(".".concat(e))).forEach((function(e){e.dispatchEvent(t)}))};var h=!1,c=!1,o=new Event("keyboard change request",{bubbles:!0}),f=function(e,t,u){i(e,a,[t,u],1)},R=function(e,t,u){i(e,a,[t,u],4)},v=function(e,t){i(e,s,[t],-1)},d=function(e,t){i(e,n,[t],0)},L=function(e,t){c=!0,r(e,t)},V=function(e,t){c=!1,r(e,t)},E=function(e,t,u,a){h?(h=!1,e.classList.remove(t)):(h=!0,e.classList.add(t)),r(u,a)};localStorage.getItem("lang")||localStorage.setItem("lang","en");var m=document.createElement("textarea");m.className=e,document.body.append(m);var y=document.createElement("div");y.className="keyboard";var F=document.createElement("div"),p=document.createElement("div"),g=document.createElement("div"),b=document.createElement("div"),k=document.createElement("div");Object.values({grave:{value:"`",shiftValue:"~",valueRu:"ё",shiftValueRu:"Ё",isFunc:!1,hasRuLetter:!0,hasEnLetter:!1,code:"Backquote"},one:{value:"1",shiftValue:"!",valueRu:"1",shiftValueRu:"!",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Digit1"},two:{value:"2",shiftValue:"@",valueRu:"2",shiftValueRu:'"',isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Digit2"},three:{value:"3",shiftValue:"#",valueRu:"3",shiftValueRu:"№",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Digit3"},four:{value:"4",shiftValue:"$",valueRu:"4",shiftValueRu:";",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Digit4"},five:{value:"5",shiftValue:"%",valueRu:"5",shiftValueRu:"%",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Digit5"},six:{value:"6",shiftValue:"^",valueRu:"6",shiftValueRu:":",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Digit6"},seven:{value:"7",shiftValue:"&",valueRu:"7",shiftValueRu:"?",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Digit7"},eight:{value:"8",shiftValue:"*",valueRu:"8",shiftValueRu:"*",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Digit8"},nine:{value:"9",shiftValue:"(",valueRu:"9",shiftValueRu:"(",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Digit9"},zero:{value:"0",shiftValue:")",valueRu:"0",shiftValueRu:")",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Digit0"},dash:{value:"-",shiftValue:"_",valueRu:"-",shiftValueRu:"_",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Minus"},equal:{value:"=",shiftValue:"+",valueRu:"=",shiftValueRu:"+",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Equal"},bSpace:{name:"Backspace",value:"",shiftValue:"",valueRu:"",shiftValueRu:"",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"Backspace"},tab:{name:"Tab",value:"    ",shiftValue:"    ",valueRu:"    ",shiftValueRu:"    ",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"Tab"},q:{value:"q",shiftValue:"Q",valueRu:"й",shiftValueRu:"Й",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyQ"},w:{value:"w",shiftValue:"W",valueRu:"ц",shiftValueRu:"Ц",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyW"},e:{value:"e",shiftValue:"E",valueRu:"у",shiftValueRu:"У",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyE"},r:{value:"r",shiftValue:"R",valueRu:"к",shiftValueRu:"К",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyR"},t:{value:"t",shiftValue:"T",valueRu:"е",shiftValueRu:"Е",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyT"},y:{value:"y",shiftValue:"Y",valueRu:"н",shiftValueRu:"Н",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyY"},u:{value:"u",shiftValue:"U",valueRu:"г",shiftValueRu:"Г",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyU"},i:{value:"i",shiftValue:"I",valueRu:"ш",shiftValueRu:"Ш",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyI"},o:{value:"o",shiftValue:"O",valueRu:"щ",shiftValueRu:"Щ",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyO"},p:{value:"p",shiftValue:"P",valueRu:"з",shiftValueRu:"З",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyP"},lBracket:{value:"[",shiftValue:"{",valueRu:"х",shiftValueRu:"Х",isFunc:!1,hasRuLetter:!0,hasEnLetter:!1,code:"BracketLeft"},rBracket:{value:"]",shiftValue:"}",valueRu:"ъ",shiftValueRu:"Ъ",isFunc:!1,hasRuLetter:!0,hasEnLetter:!1,code:"BracketRight"},bSlash:{value:"\\",shiftValue:"|",valueRu:"\\",shiftValueRu:"/",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Backslash"},del:{name:"Del",value:"",shiftValue:"",valueRu:"",shiftValueRu:"",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"Delete"},caps:{name:"CapsLock",value:"",shiftValue:"",valueRu:"",shiftValueRu:"",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"CapsLock"},a:{value:"a",shiftValue:"A",valueRu:"ф",shiftValueRu:"Ф",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyA"},s:{value:"s",shiftValue:"S",valueRu:"ы",shiftValueRu:"Ы",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyS"},d:{value:"d",shiftValue:"D",valueRu:"в",shiftValueRu:"В",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyD"},f:{value:"f",shiftValue:"F",valueRu:"а",shiftValueRu:"А",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyF"},g:{value:"g",shiftValue:"G",valueRu:"п",shiftValueRu:"П",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyG"},h:{value:"h",shiftValue:"H",valueRu:"р",shiftValueRu:"Р",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyH"},j:{value:"j",shiftValue:"J",valueRu:"о",shiftValueRu:"О",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyJ"},k:{value:"k",shiftValue:"K",valueRu:"л",shiftValueRu:"Л",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyK"},l:{value:"l",shiftValue:"L",valueRu:"д",shiftValueRu:"Д",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyL"},semicolon:{value:";",shiftValue:":",valueRu:"ж",shiftValueRu:"Ж",isFunc:!1,hasRuLetter:!0,hasEnLetter:!1,code:"Semicolon"},qMark:{value:"'",shiftValue:'"',valueRu:"э",shiftValueRu:"Э",isFunc:!1,hasRuLetter:!0,hasEnLetter:!1,code:"Quote"},enter:{name:"Enter",value:"\n",shiftValue:"\n",valueRu:"\n",shiftValueRu:"\n",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"Enter"},lShift:{name:"Shift",value:"",shiftValue:"",valueRu:"",shiftValueRu:"",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"ShiftLeft"},z:{value:"z",shiftValue:"Z",valueRu:"я",shiftValueRu:"Я",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyZ"},x:{value:"x",shiftValue:"X",valueRu:"ч",shiftValueRu:"Ч",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyX"},c:{value:"c",shiftValue:"C",valueRu:"с",shiftValueRu:"С",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyC"},v:{value:"v",shiftValue:"V",valueRu:"м",shiftValueRu:"М",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyV"},b:{value:"b",shiftValue:"B",valueRu:"и",shiftValueRu:"И",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyB"},n:{value:"n",shiftValue:"N",valueRu:"т",shiftValueRu:"Т",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyN"},m:{value:"m",shiftValue:"M",valueRu:"ь",shiftValueRu:"Ь",isFunc:!1,hasRuLetter:!0,hasEnLetter:!0,code:"KeyM"},comma:{value:",",shiftValue:"<",valueRu:"б",shiftValueRu:"Б",isFunc:!1,hasRuLetter:!0,hasEnLetter:!1,code:"Comma"},dot:{value:".",shiftValue:">",valueRu:"ю",shiftValueRu:"Ю",isFunc:!1,hasRuLetter:!0,hasEnLetter:!1,code:"Period"},slash:{value:"/",shiftValue:"?",valueRu:".",shiftValueRu:",",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Slash"},tArrow:{value:"▲",shiftValue:"▲",valueRu:"▲",shiftValueRu:"▲",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"ArrowUp"},rShift:{name:"Shift",value:"",shiftValue:"",valueRu:"",shiftValueRu:"",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"ShiftRight"},lCtrl:{name:"Ctrl",value:"",shiftValue:"",valueRu:"",shiftValueRu:"",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"ControlLeft"},win:{name:"Win",value:"",shiftValue:"",valueRu:"",shiftValueRu:"",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"MetaLeft"},lAlt:{name:"Alt",value:"",shiftValue:"",valueRu:"",shiftValueRu:"",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"AltLeft"},space:{value:" ",shiftValue:" ",valueRu:" ",shiftValueRu:" ",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"Space"},rAlt:{name:"Alt",value:"",shiftValue:"",valueRu:"",shiftValueRu:"",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"AltRight"},lArrow:{value:"◄",shiftValue:"◄",valueRu:"◄",shiftValueRu:"◄",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"ArrowLeft"},dArrow:{value:"▼",shiftValue:"▼",valueRu:"▼",shiftValueRu:"▼",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"ArrowDown"},rArrow:{value:"►",shiftValue:"►",valueRu:"►",shiftValueRu:"►",isFunc:!1,hasRuLetter:!1,hasEnLetter:!1,code:"ArrowRight"},rCtrl:{name:"Ctrl",value:"",shiftValue:"",valueRu:"",shiftValueRu:"",isFunc:!0,hasRuLetter:!1,hasEnLetter:!1,code:"ControlRight"}}).forEach((function(a,s){var n=document.createElement("div");n.className=t,a.isFunc?(n.classList.add("keyboard__key_func"),n.textContent=a.name,"Enter"===a.name&&n.addEventListener("click",(function(){f(e,m,a.value)})),"Tab"===a.name&&n.addEventListener("click",(function(){R(e,m,a.value)})),"Backspace"===a.name&&n.addEventListener("click",(function(){v(e,m)})),"Del"===a.name&&n.addEventListener("click",(function(){d(e,m)})),"Shift"===a.name&&(n.addEventListener("mousedown",(function(){L(t,o)})),n.addEventListener("mouseup",(function(){V(t,o)}))),"CapsLock"===a.name&&n.addEventListener("click",(function(e){E(e.target,u,t,o)}))):(n.textContent="en"===localStorage.getItem("lang")?a.value:a.valueRu,n.addEventListener("click",(function(){f(e,m,n.textContent)})),n.addEventListener("keyboard change request",(function(){var e=localStorage.getItem("lang");n.textContent=function(e,t,u,a){if("ru"===e){if(!t.hasRuLetter){if(!u)return t.valueRu;if(u)return t.shiftValueRu}if(t.hasRuLetter){if(u&&a)return t.valueRu;if(!u&&!a)return t.valueRu;if(u&&!a)return t.shiftValueRu;if(!u&&a)return t.shiftValueRu}}if("en"===e){if(!t.hasEnLetter){if(!u)return t.value;if(u)return t.shiftValue}if(t.hasEnLetter){if(u&&a)return t.value;if(!u&&!a)return t.value;if(u&&!a)return t.shiftValue;if(!u&&a)return t.shiftValue}}return null}(e,a,c,h)}))),n.addEventListener("mousedown",(function(e){e.target.classList.add(u)})),n.addEventListener("mouseup",(function(e){e.target.classList.remove(u)})),n.addEventListener("physKeyDown",(function(s){s.detail.code===a.code&&("CapsLock"!==a.name&&n.classList.add(u),"Enter"===a.name?f(e,m,a.value):"Tab"===a.name?R(e,m,a.value):"Backspace"===a.name?v(e,m):"Del"===a.name?d(e,m):"Shift"===a.name?L(t,o):"CapsLock"===a.name?E(n,u,t,o):a.isFunc||f(e,m,n.textContent))})),n.addEventListener("physKeyUp",(function(e){e.detail.code===a.code&&("CapsLock"!==a.name&&n.classList.remove(u),"Shift"===a.name&&V(t,o))})),s>=0&&s<14?F.append(n):s>=14&&s<29?p.append(n):s>=29&&s<42?g.append(n):s>=42&&s<55?b.append(n):k.append(n),y.append(F,p,g,b,k)})),document.body.append(y);for(var K=["Клавиатура разработана для операционной системы Windows","Для смены языка используйте сочетание клавиш: левые Ctrl + Alt"],S=0;S<K.length;S+=1){var w=document.createElement("p");w.className="description",w.textContent=K[S],document.body.append(w)}window.addEventListener("keydown",(function(e){if(e.preventDefault(),r(t,new CustomEvent("physKeyDown",{detail:{code:e.code}})),e.altKey&&e.ctrlKey){var u="ru"===localStorage.getItem("lang")?"en":"ru";localStorage.setItem("lang",u),r(t,o)}})),window.addEventListener("keyup",(function(e){e.preventDefault(),r(t,new CustomEvent("physKeyUp",{detail:{code:e.code}}))}))})();